package br.com.salaarcoiris.jdbc;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.util.Date;

import br.com.salaarcoiris.bd.Conexao;
import br.com.salaarcoiris.modelo.Aluno;

public class AlunoDAO {
	// CRUD
	// /* String sql_resp = "INSERT INTO responsavel(nomeResp, data_nasc) VALUES (?,?)";*/
	public void save(Aluno aluno) {
		String sql = "INSERT INTO aluno(cpfAluno, nomeAluno, data_nasc, email, senha, telefone) VALUES (?,?,?,?,?,?)";
		
		
		Connection conn = null;
		
		PreparedStatement pstm = null;
		
		try {
			// Criar conexão com o BD
			conn = Conexao.createConnectionToMySql();
			
			// Criado p/ executar uam query
			pstm = (PreparedStatement) conn.prepareStatement(sql);
			pstm.setInt(1, aluno.getCpfAluno());
			pstm.setString(2, aluno.getNomeAluno());
			pstm.setDate(3, (java.sql.Date) new Date(aluno.getNascAluno().getTime()));
			pstm.setString(4, aluno.getEmail());
			pstm.setString(5, aluno.getSenha());
			pstm.setString(6, aluno.getTelefone());
			
			// Executar query 
			
			pstm.execute();
		} catch (Exception e) {
			e.printStackTrace();
		}finally {
			// fecha conexões
			
			try {
				if(pstm!=null) {
					pstm.close();
				}
				
				if(conn!=null) {
					conn.close();
				}
			}catch (Exception e) {
				e.printStackTrace();
			}
		}
	}
}
